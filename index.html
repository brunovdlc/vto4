<html lang="en">
   <head>
      <meta charset="UTF-8">
      <link rel="apple-touch-icon" type="image/png" href="https://u.cubeupload.com/BrunoT/divertido.png">
      <meta name="apple-mobile-web-app-title" content="BrunoT">
      <link rel="shortcut icon" type="image/x-icon" href="https://u.cubeupload.com/BrunoT/divertido.png">
      <link rel="mask-icon" type="image/x-icon" href="https://u.cubeupload.com/BrunoT/divertido.png" color="#111">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>BrunoT</title>
      <head>
         <style>
            body {
            -webkit-animation: colorchange 60s infinite; 
            animation: colorchange 60s infinite;
            }
            @-webkit-keyframes colorchange {
            0%  {background: #33FFF3;}
            25%  {background: #78281F;}
            50%  {background: #117A65;}
            75%  {background: #DC7633;}
            100% {background: #9B59B6;}
            }
            @keyframes colorchange {
            0%  {background: #33FFF3;}
            25%  {background: #78281F;}
            50%  {background: #117A65;}
            75%  {background: #DC7633;}
            100% {background: #9B59B6;}
            }   
         </style>
   </head>
   <body></body>
   <link rel="stylesheet" media="screen" href="https://cpwebassets.codepen.io/assets/fullpage/fullpage-96f5da14bc71e5883d519b4eb5e93297dde552c2f91a97fcfb30035219cf1c1a.css">
   <link rel="apple-touch-icon" type="image/png" href="https://u.cubeupload.com/BrunoT/divertido.png">
   <meta name="apple-mobile-web-app-title" content="BrunoT">
   <link rel="shortcut icon" type="image/x-icon" href="https://u.cubeupload.com/BrunoT/divertido.png">
   <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111">
   <title>BrunoT</title>
   <script>
      if (document.location.search.match(/type=embed/gi)) {
        window.parent.postMessage("resize", "*");
      }
   </script>
   <style>
      html { font-size: 15px; }
      html, body { margin: 0; padding: 0; min-height: 100%; }
      body { height:100%; display: flex; flex-direction: column; }
      .referer-warning {
      background: black;
      box-shadow: 0 2px 5px rgba(0,0,0, 0.5);
      padding: 0.75em;
      color: white;
      text-align: center;
      font-family: var(--cp-font-family);
      line-height: 1.2;
      font-size: 1rem;
      position: relative;
      z-index: 2;
      }
      .referer-warning h1 { font-size: 1.2rem; margin: 0; }
      .referer-warning a { color: #56bcf9; } /* $linkColorOnBlack */
   </style>
   </head>
   <body class="">
      <div id="result-iframe-wrap" role="main">
         <iframe id="result" srcdoc="
            <!DOCTYPE html>
            <html lang=&quot;en&quot; >
            <head>
            <meta charset=&quot;UTF-8&quot;>
            <link rel=&quot;apple-touch-icon&quot; type=&quot;image/png&quot; href=&quot;https://u.cubeupload.com/BrunoT/divertido.png&quot; />
            <meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;CodePen&quot;>
            <link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;https://u.cubeupload.com/BrunoT/divertido.png&quot; />
            <link rel=&quot;mask-icon&quot; type=&quot;image/x-icon&quot; href=&quot;https://u.cubeupload.com/BrunoT/divertido.png&quot; color=&quot;#111&quot; />
            <title>BrunoT - Mvk</title>
            <style>
            html, body {
            height: 100%;
            }
            body {
            margin: 0;
            }
            #canvas {
            width: 100%;
            height: 100%;
            }
            </style>
            <script>
            window.console = window.console || function(t) {};
            </script>
            <script>
            if (document.location.search.match(/type=embed/gi)) {
            window.parent.postMessage(&quot;resize&quot;, &quot;*&quot;);
            }
            </script>
            </head>
            <body translate=&quot;no&quot; >
            <canvas id=&quot;canvas&quot;></canvas>
            <script src=&quot;https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js&quot;></script>
            <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js'></script>
            <script id=&quot;rendered-js&quot; >
            console.clear();
            console.log('lsakdfalskjdflnksd');
            const config = {
            src: 'https://i.imgur.com/dzsO0Lc.png',
            rows: 15,
            cols: 7 };
            // UTILS
            const randomRange = (min, max) => min + Math.random() * (max - min);
            const randomIndex = array => randomRange(0, array.length) | 0;
            const removeFromArray = (array, i) => array.splice(i, 1)[0];
            const removeItemFromArray = (array, item) => removeFromArray(array, array.indexOf(item));
            const removeRandomFromArray = array => removeFromArray(array, randomIndex(array));
            const getRandomFromArray = (array) =>
            array[randomIndex(array) | 0];
            // TWEEN FACTORIES
            const resetPeep = ({ stage, peep }) => {
            const direction = Math.random() > 0.5 ? 1 : -1;
            // using an ease function to skew random to lower values to help hide that peeps have no legs
            const offsetY = 100 - 250 * gsap.parseEase('power2.in')(Math.random());
            const startY = stage.height - peep.height + offsetY;
            let startX;
            let endX;
            if (direction === 1) {
            startX = -peep.width;
            endX = stage.width;
            peep.scaleX = 1;
            } else {
            startX = stage.width + peep.width;
            endX = 0;
            peep.scaleX = -1;
            }
            peep.x = startX;
            peep.y = startY;
            peep.anchorY = startY;
            return {
            startX,
            startY,
            endX };
            };
            const normalWalk = ({ peep, props }) => {
            const {
            startX,
            startY,
            endX } =
            props;
            const xDuration = 10;
            const yDuration = 0.25;
            const tl = gsap.timeline();
            tl.timeScale(randomRange(0.5, 1.5));
            tl.to(peep, {
            duration: xDuration,
            x: endX,
            ease: 'none' },
            0);
            tl.to(peep, {
            duration: yDuration,
            repeat: xDuration / yDuration,
            yoyo: true,
            y: startY - 10 },
            0);
            return tl;
            };
            const walks = [
            normalWalk];
            // CLASSES
            class Peep {
            constructor({
            image,
            rect })
            {
            this.image = image;
            this.setRect(rect);
            this.x = 0;
            this.y = 0;
            this.anchorY = 0;
            this.scaleX = 1;
            this.walk = null;
            }
            setRect(rect) {
            this.rect = rect;
            this.width = rect[2];
            this.height = rect[3];
            this.drawArgs = [
            this.image,
            ...rect,
            0, 0, this.width, this.height];
            }
            render(ctx) {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.scale(this.scaleX, 1);
            ctx.drawImage(...this.drawArgs);
            ctx.restore();
            }}
            // MAIN
            const img = document.createElement('img');
            img.onload = init;
            img.src = config.src;
            const canvas = document.querySelector('#canvas');
            const ctx = canvas.getContext('2d');
            const stage = {
            width: 0,
            height: 0 };
            const allPeeps = [];
            const availablePeeps = [];
            const crowd = [];
            function init() {
            createPeeps();
            // resize also (re)populates the stage
            resize();
            gsap.ticker.add(render);
            window.addEventListener('resize', resize);
            }
            function createPeeps() {
            const {
            rows,
            cols } =
            config;
            const {
            naturalWidth: width,
            naturalHeight: height } =
            img;
            const total = rows * cols;
            const rectWidth = width / rows;
            const rectHeight = height / cols;
            for (let i = 0; i < total; i++) {if (window.CP.shouldStopExecution(0)) break;
            allPeeps.push(new Peep({
            image: img,
            rect: [
            i % rows * rectWidth,
            (i / rows | 0) * rectHeight,
            rectWidth,
            rectHeight] }));
            }window.CP.exitedLoop(0);
            }
            function resize() {
            stage.width = canvas.clientWidth;
            stage.height = canvas.clientHeight;
            canvas.width = stage.width * devicePixelRatio;
            canvas.height = stage.height * devicePixelRatio;
            crowd.forEach(peep => {
            peep.walk.kill();
            });
            crowd.length = 0;
            availablePeeps.length = 0;
            availablePeeps.push(...allPeeps);
            initCrowd();
            }
            function initCrowd() {
            while (availablePeeps.length) {if (window.CP.shouldStopExecution(1)) break;
            // setting random tween progress spreads the peeps out
            addPeepToCrowd().walk.progress(Math.random());
            }window.CP.exitedLoop(1);
            }
            function addPeepToCrowd() {
            const peep = removeRandomFromArray(availablePeeps);
            const walk = getRandomFromArray(walks)({
            peep,
            props: resetPeep({
            peep,
            stage }) }).
            eventCallback('onComplete', () => {
            removePeepFromCrowd(peep);
            addPeepToCrowd();
            });
            peep.walk = walk;
            crowd.push(peep);
            crowd.sort((a, b) => a.anchorY - b.anchorY);
            return peep;
            }
            function removePeepFromCrowd(peep) {
            removeItemFromArray(crowd, peep);
            availablePeeps.push(peep);
            }
            function render() {
            canvas.width = canvas.width;
            ctx.save();
            ctx.scale(devicePixelRatio, devicePixelRatio);
            crowd.forEach(peep => {
            peep.render(ctx);
            });
            ctx.restore();
            }
            //# sourceURL=pen.js
            </script>
            </body>
            </html>
            " sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation" allow="accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write" allowtransparency="true" allowpaymentrequest="true" allowfullscreen="true" class="result-iframe">
         </iframe>
      </div>
   </body>
</html>
